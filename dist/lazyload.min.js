var _extends = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]) } return e }, _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }; !function (e, t) { "object" === ("undefined" == typeof exports ? "undefined" : _typeof(exports)) && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.LazyLoad = t() }(this, function () { "use strict"; var o = "data-", i = function (e, t) { return e.getAttribute(o + t) }; function s(e) { return e.filter(function (e) { return !i(e, "was-processed") }) } var a = function (e, t) { var n, r = "LazyLoad::Initialized", s = new e(t); try { n = new CustomEvent(r, { detail: { instance: s } }) } catch (e) { (n = document.createEvent("CustomEvent")).initCustomEvent(r, !1, !1, { instance: s }) } window.dispatchEvent(n) }; var c = function (e, t) { var n = t.data_src, r = t.data_srcset, s = e.tagName, a = i(e, n); if ("IMG" === s) { !function (e, t) { var n = t.data_srcset, r = e.parentNode; if (r && "PICTURE" === r.tagName) for (var s, a = 0; s = r.children[a]; a += 1)if ("SOURCE" === s.tagName) { var o = i(s, n); o && s.setAttribute("srcset", o) } }(e, t); var o = i(e, r); return o && e.setAttribute("srcset", o), void (a && e.setAttribute("src", a)) } "IFRAME" !== s ? a && (e.style.backgroundImage = 'url("' + a + '")') : a && e.setAttribute("src", a) }, e = "undefined" != typeof window, n = e && "IntersectionObserver" in window, l = e && "classList" in document.createElement("p"), d = function (e, t) { l ? e.classList.add(t) : e.className += (e.className ? " " : "") + t }, u = function (e, t) { e && e(t) }, f = "load", v = "error", _ = function (e, t, n) { e.removeEventListener(f, t), e.removeEventListener(v, n) }, b = function (n, r) { var s = function e(t) { m(t, !0, r), _(n, e, a) }, a = function e(t) { m(t, !1, r), _(n, s, e) }; n.addEventListener(f, s), n.addEventListener(v, a) }, m = function (e, t, n) { var r, s, a = e.target; r = a, s = n.class_loading, l ? r.classList.remove(s) : r.className = r.className.replace(new RegExp("(^|\\s+)" + s + "(\\s+|$)"), " ").replace(/^\s+/, "").replace(/\s+$/, ""), d(a, t ? n.class_loaded : n.class_error), u(t ? n.callback_load : n.callback_error, a) }, h = function (e, t, n) { var r, s, a = { callCallback: u, addOneShotListeners: b, addClass: d }; _extends(a, n), a.callCallback(t.callback_enter, e), -1 < ["IMG", "IFRAME"].indexOf(e.tagName) && (a.addOneShotListeners(e, t), a.addClass(e, t.class_loading)), c(e, t), r = "was-processed", s = !0, e.setAttribute(o + r, s), a.callCallback(t.callback_set, e) }, t = function (e, t) { var n; this._settings = (n = { elements_selector: "img", container: document, threshold: 300, data_src: "src", data_srcset: "srcset", class_loading: "loading", class_loaded: "loaded", class_error: "error", callback_load: null, callback_error: null, callback_set: null, callback_enter: null }, _extends({}, n, e)), this._setObserver(), this.update(t) }; t.prototype = { _setObserver: function () { var r = this; if (n) { var e = this._settings, t = { root: e.container === document ? null : e.container, rootMargin: e.threshold + "px" }; this._observer = new IntersectionObserver(function (e) { e.forEach(function (e) { if ((n = e).isIntersecting || 0 < n.intersectionRatio) { var t = e.target; h(t, r._settings), r._observer.unobserve(t) } var n }), r._elements = s(r._elements) }, t) } }, update: function (e) { var t = this, n = this._settings, r = e || n.container.querySelectorAll(n.elements_selector); this._elements = s(Array.prototype.slice.call(r)), this._observer ? this._elements.forEach(function (e) { t._observer.observe(e) }) : (this._elements.forEach(function (e) { h(e, n) }), this._elements = s(this._elements)) }, destroy: function () { var t = this; this._observer && (s(this._elements).forEach(function (e) { t._observer.unobserve(e) }), this._observer = null), this._elements = null, this._settings = null } }; var r = window.lazyLoadOptions; return e && r && function (e, t) { if (t.length) for (var n, r = 0; n = t[r]; r += 1)a(e, n); else a(e, t) }(t, r), t });